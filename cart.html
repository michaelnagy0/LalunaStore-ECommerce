<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart & Checkout | Laluna Store</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="La Luna - ŸÖÿ™ÿ¨ÿ± ÿßŸÑŸÖÿ¨ŸàŸáÿ±ÿßÿ™ ÿßŸÑŸÅÿßÿÆÿ±ÿ© ŸÑŸÑÿ±ÿ¨ÿßŸÑ ŸàÿßŸÑŸÜÿ≥ÿßÿ°. ÿßŸÉÿ™ÿ¥ŸÅ ÿ™ÿ¥ŸÉŸäŸÑÿ™ŸÜÿß ŸÖŸÜ ÿßŸÑÿÆŸàÿßÿ™ŸÖÿå ÿßŸÑŸÇŸÑÿßÿ¶ÿØÿå ŸàÿßŸÑÿ£ÿ≥ÿßŸàÿ± ÿßŸÑŸÖÿµŸÜŸàÿπÿ© ŸäÿØŸàŸäÿßŸã.">
<meta name="keywords" content="ŸÖÿ¨ŸàŸáÿ±ÿßÿ™ ŸÅÿßÿÆÿ±ÿ©, ÿÆŸàÿßÿ™ŸÖ ÿ±ÿ¨ÿßŸÑŸä, ŸáÿØÿßŸäÿß ŸÜÿ≥ÿßÿ¶Ÿäÿ©, ÿ∞Ÿáÿ®, ŸÅÿ∂ÿ©, La Luna, ŸÖÿ™ÿ¨ÿ± ŸÖÿ¨ŸàŸáÿ±ÿßÿ™">
<meta name="author" content="La Luna Team">

<title>La Luna Store | ŸÖÿ¨ŸàŸáÿ±ÿßÿ™ ŸÅÿßÿÆÿ±ÿ© ŸÑŸÑÿ±ÿ¨ÿßŸÑ ŸàÿßŸÑŸÜÿ≥ÿßÿ°</title>
<body>

    <header>
        <div class="logo-container">
            <img src="WhatsApp Image 2025-10-22 at 3.08.32 PM.jpeg" alt="Laluna Store Logo" class="logo">
        </div>
        <h2>"Discover What's Missing"</h2>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="men.html">Men</a></li>
                <li><a href="women.html">Women</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li class="search-box-li">
                    <input type="text" id="search-input" placeholder="Search products..." class="search-input">
                    <button class="search-btn">üîç</button>
                </li>
                <li><a href="cart.html">üõí Cart</a></li>
            </ul>
        </nav>
    </header>

    <main class="centered-content">
        
        <section id="checkout" class="cart-section">
            <h2>üõí Your Cart and Checkout</h2>
            
            <div class="cart-items-table">
                <table>
                    <thead>
                        <tr>
                            <th style="width: 40%;">Product</th>
                            <th style="width: 15%;">Qty</th>
                            <th style="width: 15%;">Price</th>
                            <th style="width: 20%;">Subtotal</th>
                            <th style="width: 10%;">Remove</th>
                        </tr>
                    </thead>
                    <tbody id="cart-table-body">
                        </tbody>
                </table>
            </div>

            <div class="cart-totals">
                <p>Shipping Fee: <span id="shipping-fee">0.00 EGP</span></p>
                <p>Cart Subtotal: <span id="cart-subtotal">0.00 EGP</span></p>
                <p class="total-price-final">Order Total: <span id="final-total">0.00 EGP</span></p>
            </div>


            <form action="https://formspree.io/f/Your_Formspree_ID" method="POST" class="checkout-form" id="checkout-form" enctype="multipart/form-data">
                
                <fieldset class="shipping-details">
                    <legend>1. Shipping Details</legend>
                    <label for="name">Full Name:</label>
                    <input type="text" id="name" name="Full Name" required>

                    <label for="email">Email Address:</label>
                    <input type="email" id="email" name="_replyto" required>

                    <label for="address">Full Address (City, Street, Building No.):</label>
                    <input type="text" id="address" name="Shipping Address" required>

                    <label for="phone">Phone Number (For Call/WhatsApp):</label>
                    <input type="tel" id="phone" name="Phone Number" required>
                </fieldset>
                
                <fieldset class="payment-details">
                    <legend>2. Select Payment Method</legend>
                    
                    <div class="payment-options">
                        <input type="radio" id="cash" name="Payment Method" value="Cash On Delivery" required>
                        <label for="cash">Cash On Delivery üíµ</label><br>

                        <input type="radio" id="instapay" name="Payment Method" value="InstaPay/Orange Cash">
                        <label for="instapay">InstaPay / Orange Cash (Pre-paid)</label><br>
                    </div>

                    <div id="transfer-details" style="display: none; margin-top: 15px; border: 1px dashed var(--color-gold); padding: 15px;">
                        <h4>Please use the following numbers for transfer:</h4>
                        
                        <div class="transfer-number-group">
                            <p><strong>InstaPay / Orange Cash:</strong> <span id="num1" dir="ltr">01281277953</span> 
                            <button type="button" class="copy-button" data-number="01281277953">Copy</button></p>
                        </div>
                        
                        <label for="proof">Upload Transfer Proof Image (Optional):</label>
                        <input type="file" id="proof" name="Transfer Proof" accept="image/*">
                        
                    </div>
                </fieldset>
                
                <button type="submit" class="checkout-button cta-button">Confirm Order and Pay</button>

                <button type="button" class="whatsapp-button cta-button" id="whatsapp-order-btn" style="background-color: #25D366; border-color: #25D366;">Send Order via WhatsApp</button>
                
                <textarea name="Order Details" id="order-details-summary" style="display:none;"></textarea>
            </form>
        </section>
        
    </main>

    <footer id="footer-contact">
        <h2>Contact Us</h2>
        <p>Email: <a href="mailto:michaelnagyfouad@gmail.com">michaelnagyfouad@gmail.com</a></p>
        <div class="contact-numbers">
            <p>WhatsApp Support: <a href="https://wa.me/201281277953" target="_blank" dir="ltr">01281277953</a></p>
            <p>Direct Call: <a href="tel:+201281277953" dir="ltr">01281277953</a></p>
        </div>
        <p class="copyright">&copy; 2025 Laluna Store. All Rights Reserved.</p>
    </footer>

    <script src="app.js"></script>
    <script>
        // Ÿáÿ∞ÿß ÿßŸÑÿ≥ŸÉÿ±Ÿäÿ®ÿ™ ÿßŸÑÿµÿ∫Ÿäÿ± Ÿäÿ¥ÿ∫ŸÑ Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑŸÜÿ≥ÿÆ ŸàÿßŸÑŸàÿßÿ™ÿ≥ ÿ¢ÿ® ÿßŸÑÿÆÿßÿµÿ© ÿ®ÿµŸÅÿ≠ÿ© ÿßŸÑÿπÿ±ÿ®ÿ©
        document.addEventListener('DOMContentLoaded', () => {
            const transferDetails = document.getElementById('transfer-details');
            const paymentOptions = document.getElementsByName('Payment Method');
            const copyButtons = document.querySelectorAll('.copy-button');
            const whatsappBtn = document.getElementById('whatsapp-order-btn');
            const checkoutForm = document.getElementById('checkout-form');
            const orderSummaryInput = document.getElementById('order-details-summary');


            // 1. Ÿàÿ∏ŸäŸÅÿ© ÿ•ÿ∏Ÿáÿßÿ±/ÿ•ÿÆŸÅÿßÿ° ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ
            paymentOptions.forEach(radio => {
                radio.addEventListener('change', () => {
                    transferDetails.style.display = (radio.value === 'InstaPay/Orange Cash') ? 'block' : 'none';
                });
            });

            // 2. Ÿàÿ∏ŸäŸÅÿ© ŸÜÿ≥ÿÆ ÿßŸÑÿ±ŸÇŸÖ
            copyButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const numberToCopy = button.getAttribute('data-number');
                    navigator.clipboard.writeText(numberToCopy).then(() => {
                        button.textContent = 'Copied!';
                        setTimeout(() => {
                            button.textContent = 'Copy';
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy:', err);
                    });
                });
            });

            // 3. ÿ™ÿ≠ÿØŸäÿ´ ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿ∑ŸÑÿ® ŸÅŸä ÿßŸÑÿ≠ŸÇŸÑ ÿßŸÑŸÖÿÆŸÅŸä ŸÇÿ®ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ (ŸÑŸÑÿ•ŸäŸÖŸäŸÑ)
            checkoutForm.addEventListener('submit', () => {
                const cartDetails = getCart(); // ÿØÿßŸÑÿ© ŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä app.js
                const subtotal = document.getElementById('cart-subtotal').textContent;
                const total = document.getElementById('final-total').textContent;
                
                let summaryText = "--- PRODUCTS ---\n";
                cartDetails.forEach(item => {
                    summaryText += `${item.name} | Qty: ${item.qty} | Price: ${item.price} EGP\n`;
                });
                summaryText += `\n--- TOTALS ---\nSubtotal: ${subtotal}\nShipping: ${document.getElementById('shipping-fee').textContent}\nFINAL TOTAL: ${total}\n`;
                
                orderSummaryInput.value = summaryText; // Ÿàÿ∂ÿπ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸÅŸä ÿßŸÑÿ≠ŸÇŸÑ ÿßŸÑŸÖÿÆŸÅŸä
            });
            
            // 4. Ÿàÿ∏ŸäŸÅÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ ÿ¢ÿ®
            whatsappBtn.addEventListener('click', (e) => {
                e.preventDefault(); 
                
                const name = document.getElementById('name').value || "N/A";
                const address = document.getElementById('address').value || "N/A";
                const phone = document.getElementById('phone').value || "N/A";
                const total = document.getElementById('final-total').textContent;
                const payment = document.querySelector('input[name="Payment Method"]:checked')?.value || "Cash On Delivery";
                const cartDetails = getCart(); // ÿØÿßŸÑÿ© ŸÖŸàÿ¨ŸàÿØÿ© ŸÅŸä app.js

                let productList = "";
                cartDetails.forEach(item => {
                    productList += `- ${item.name} (x${item.qty})\n`; // ÿ™ŸÖ ÿ™ÿ®ÿ≥Ÿäÿ∑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©
                });


                // ÿ™ŸÜÿ≥ŸäŸÇ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑŸàÿßÿ™ÿ≥ ÿ¢ÿ®
                const message = `*NEW LALUNA ORDER REQUEST (WEB)*\n\n*CUSTOMER INFO:*\nName: ${name}\nPhone: ${phone}\nAddress: ${address}\nPayment: ${payment}\n\n*ORDER ITEMS:*\n${productList}\n\n*TOTAL DUE: ${total}*`;
                
                const whatsappUrl = `https://wa.me/201281277953?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });
        });
    </script>
</body>
</html>